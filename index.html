<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AR Drawing</title>
</head>
<body style="margin: 0; overflow: hidden;">
  <!-- A-Frame library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.4.2/aframe.min.js"></script>

  <!-- Your AR scene with line drawing -->
  <a-scene embedded arjs>
    <a-entity camera></a-entity>
    <a-entity id="drawingContainer"></a-entity>
  </a-scene>

  <script>
    const scene = document.querySelector("a-scene");
    let drawing = false;
    let lastPosition;

    scene.addEventListener("touchstart", (e) => {
      drawing = true;
      lastPosition = getTouchPoint(e);
    });

    scene.addEventListener("touchmove", (e) => {
      if (drawing) {
        const newPosition = getTouchPoint(e);

        // Draw line directly in AR space using A-Frame
        drawLine(lastPosition, newPosition);

        lastPosition = newPosition;
      }
    });

    scene.addEventListener("touchend", () => {
      drawing = false;
    });

    function getTouchPoint(e) {
      const touch = e.touches[0];
      const touchX = touch.clientX;
      const touchY = touch.clientY;
      return { x: touchX, y: touchY };
    }

    function drawLine(startPoint, endPoint) {
      const drawingContainer = document.getElementById("drawingContainer");

      const line = document.createElement("a-entity");
      line.setAttribute("line", {
        start: `${startPoint.x} ${startPoint.y} 0`,
        end: `${endPoint.x} ${endPoint.y} 0`,
        color: "#ff0000",
      });

      drawingContainer.appendChild(line);
    }
  </script>
</body>
</html>
